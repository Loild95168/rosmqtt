<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>MQTT 控制 ROS</title>
  <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>
</head>
<body>
  <h2>📱 控制面板</h2>
  <button onclick="send('forward')">前進</button>
  <button onclick="send('backward')">後退</button>
  <button onclick="send('stop')">停止</button>

  <div id="status"></div>

  <script>
    const client = mqtt.connect("wss://t2bac0a0.ala.asia-southeast1.emqxsl.com:8084/mqtt", {
      username: "你的帳號（可選）",
      password: "你的密碼（可選）"
    });

    client.on("connect", () => {
      document.getElementById("status").innerText = "✅ 已連上 MQTT Broker";
    });

    function send(cmd) {
      const payload = {
        command: cmd,
        client_time: new Date().toISOString()
      };
      client.publish("ros/control", JSON.stringify(payload));
      console.log("📤 發送指令：", payload);
    }
  </script>
</body>
</html>

